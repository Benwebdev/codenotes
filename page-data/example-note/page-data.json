{"componentChunkName":"component---node-modules-gatsby-theme-code-notes-src-templates-note-js","path":"/example-note","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Example note\",\n  \"tags\": [\"example\"],\n  \"emoji\": \"ðŸ‘‹\",\n  \"link\": \"https://zander.wtf\",\n  \"modified\": \"2021-04-23T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This is an example note, see below for some code.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"{\\n  resolve: 'gatsby-theme-code-notes',\\n  options: {\\n    contentPath: 'notes',\\n    basePath: '/',\\n    showThemeInfo: true,\\n    showDescriptionInSidebar: true,\\n  },\\n},\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import ShopfiyAPI from '@benline/ShopifyAPI'; \\nimport crypto from '@benline/crypto';\\nconst config = require(\\\"../configs/enivorment\\\");\\n\\n\\nconst openSession = shop => {\\n    return new ShopifyAPI({\\n        shop: shop.shopify_domain,\\n        shopify_api: config.SHOPIFY_API,\\n        shopify_secret: config.SHOPIFY_SECRET,\\n        access_token: shop.accessToken,\\n    });\\n}\\n\\nconst buildWebhook = (\\n    topic = \\\"\\\",\\n    address = `${config.APP_URI}/webhook/`,\\n    shop = {},\\n    callback\\n  ) => {\\n    if (topic.length === 0) {\\n      return false;\\n    } else if (address.length === 0) {\\n      return false;\\n    } else if (typeof shop !== \\\"object\\\") {\\n      return false;\\n    } else if (typeof callback !== \\\"function\\\") {\\n      return false;\\n    }\\n    const data = {\\n      webhook: {\\n        topic,\\n        address,\\n        format: \\\"json\\\",\\n      },\\n    };\\n    shop.post(\\\"/admin/webhooks.json\\\", data, (err, response, headers) => {\\n      if (err) {\\n        if (typeof callback === \\\"function\\\") {\\n          return callback(err, response, headers);\\n        }\\n        return false;\\n      }\\n      return typeof callback === \\\"function\\\"\\n        ? callback(null, response, headers)\\n        : true;\\n    });\\n    return typeof callback === \\\"function\\\"\\n      ? callback(\\\"Could not create webhook\\\", null, null)\\n      : false;\\n}\\n\\nconst generateNonce = (bits = 64) => {\\n    let text = \\\"\\\";\\n    const possible =\\n      \\\"ABCDEFGHIJKLMOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890\\\";\\n\\n    for (let i = 0; i < bits; i += 1) {\\n      text += possible.charAt(Math.floor(Math.random() * bits));\\n    }\\n    return text;\\n}\\n\\nconst verifyHmac = (data, hmac) => {\\n    if (!hmac) {\\n      return false;\\n    } else if (!data || typeof data !== \\\"object\\\") {\\n      return false;\\n    }\\n\\n    const sharedSecret = config.SHOPIFY_SECRET;\\n    const calculatedSignature = crypto\\n      .createHmac(\\\"sha256\\\", sharedSecret)\\n      .update(Buffer.from(data), \\\"utf8\\\")\\n      .digest(\\\"base64\\\");\\n    return calculatedSignature === hmac;\\n}\\n\\nconst verifyOAuth = (query) => {\\n    if (!query.hmac) {\\n      return false;\\n    }\\n    const hmac = query.hmac;\\n    const sharedSecret = config.SHOPIFY_SECRET;\\n    delete query.hmac;\\n    const sortedQuery = Object.keys(query)\\n      .map((key) => `${key}=${Array(query[key]).join(\\\",\\\")}`)\\n      .sort()\\n      .join(\\\"&\\\");\\n    const calculatedSignature = crypto\\n      .createHmac(\\\"sha256\\\", sharedSecret)\\n      .update(sortedQuery)\\n      .digest(\\\"hex\\\");\\n    if (calculatedSignature === hmac) {\\n      return true;\\n    }\\n\\n    return false;\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Example note","tags":["example"],"emoji":"ðŸ‘‹","link":"https://zander.wtf","modified":"April 23, 2021","modifiedTimestamp":"2021-04-23T00:00:00.000Z"},"references":[],"fields":{"slug":"\\example-note"},"tableOfContents":{},"parent":{"relativePath":"example-note.md"}}},"pageContext":{"id":"535bc46f-50a2-595f-80fc-70d7fd786231","previous":{"id":"79c5e356-4046-5e1e-8806-12d26382c5aa","frontmatter":{"title":"Example note2","tags":["example"]},"fields":{"slug":"\\example-note2"}},"next":null,"hasUntagged":false,"basePath":"/","tags":[{"tag":"example","totalCount":2,"slug":"/example","path":"\\tag\\example"}]}},"staticQueryHashes":["1308211557","2744905544","467212769"]}